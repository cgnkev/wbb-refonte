{% extends 'SonataAdminBundle:CRUD:base_list.html.twig' %}

{% block list_table %}

    {% set feedTypes = ['twitter', 'facebook'] %}

    <div class="tabbable">
        <ul id="feed-tabs" class="nav nav-tabs">
            <li class="active">
                <a  href="#list_feed" data-toggle="tab">Général</a>
            </li>
            {% for feedType in feedTypes %}
                <li>
                    <a  href="#{{ feedType }}" data-toggle="tab">
                        <img width="60px" src="{{ asset('bundles/bmwicore/img/common/' ~ feedType ~ '-tab.png') }}" />
                    </a>
                </li>
            {% endfor %}
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="list_feed">
                <fieldset>
                    <div class="sonata-ba-collapsed-fields">
                        {{ parent() }}
                    </div>
                </fieldset>
            </div>
            {% for feedType in feedTypes %}
                <div class="tab-pane" id="{{ feedType }}">
                    <fieldset>
                        <div class="sonata-ba-collapsed-fields">
                            {#Twitter Here#}
                            <div class="tweets">
                                <div class="tweets_header">{{ feedType|capitalize }} BMW i</a></div>
                                <div class="content_tweets"></div>
                                <div class="tweets_action">
                                    <img class="loader" src="{{ asset('bundles/bmwicore/img/common/loader.gif') }}" alt="" />
                                    <input type="button" class="more btn btn-info btn-small" value="Suivant">
                                </div>
                                <div></div>
                                <div class="tweets_footer">
                                    {% if feedType == 'twitter' %}
                                        <span id="bird"></span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
    <script src="{{ asset('bundles/bmwicore/js/admin/feed.js') }}"></script>

    <script type="text/template" id="tweet">
        <div class="tweet" id="{0}">
            <div class="avatar">
                <a rel="nofollow" target="_blank" class="mt_avatar" href="{1}">
                    <img src="{2}" border="0"></a>
            </div>
            <div class="mt_header">
                <a rel="nofollow" target="_blank" class="mt_user" href="{1}">{3}</a>
                <span class="mt_screen_name">{4}</span>
                <div class="time">{5}</div>
            </div>
            <div class="mt_text">{6}</div>
            <div class="mt_footer">
                <img class="loader" style="display:none;" src="{{ asset('bundles/bmwicore/img/common/loader.gif') }}" alt="" />
                <select id="thematic-{0}" class='thematic_list'>{7}</select>
                <button id="add-{0}" class="add btn btn-mini" type="button">+</button>
            </div>
            <div style="clear:both;"></div>
        </div>
    </script>

    <script type="text/template" id="tweetDisabled">
        <div class="tweet tweet_disabled" id="{0}">
            <div class="avatar">
                <a rel="nofollow" target="_blank" class="mt_avatar" href="{1}">
                    <img src="{2}" border="0"></a>
            </div>
            <div class="mt_header">
                <a rel="nofollow" target="_blank" class="mt_user" href="{1}">{3}</a>
                <span class="mt_screen_name">{4}</span>
                <div class="time">{5}</div>
            </div>
            <div class="mt_text">{6}</div>
            <div class="mt_footer"></div>
            <div style="clear:both;"></div>
        </div>
    </script>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/bmwicore/css/jquery.minitwitter.css') }}" media="all" rel="stylesheet" type="text/css"/>
    <style>
        .tweets_action { padding: 6px 12px; text-align: right; }
        .thematic_list { margin-bottom: 0px !important; width: 140px !important; height:25px !important;}
        .tweet_disabled { background-color: #f5f5f5;  }
        .mt_footer { float: right; }
    </style>
{% endblock %}
